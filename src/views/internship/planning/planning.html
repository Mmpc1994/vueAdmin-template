<div>
  <el-card class="table-searchBar">
    <FormBuilder :schema="schema" :model="model">
      <el-form-item slot="suffix">
        <el-button type="primary" @click="get_internship_planning">查询</el-button>
      </el-form-item>
    </FormBuilder>
  </el-card>

  <el-card style="margin-top: 15px;">
    <el-table :data="internshipPlanningsList" @row-click="onRowClick">
      <el-table-column label="状态">
        <template slot-scope="scope">
          <el-tag>{{scope.row.approve_status}}</el-tag>
        </template>
      </el-table-column>
      <el-table-column 
        v-for="(title, index) in internshipService.planningTitles"
        :label="title.label"
        :prop="title.prop"
        :key="index">

      </el-table-column>
      <el-table-column label="操作">
        <template slot-scope="scope">
          <el-button :disabled="scope.row.approve_status !== '未审核'" type="primary" size="small" @click="before_approve($event, scope.row)">审核</el-button>
        </template>
      </el-table-column>
    </el-table>
  </el-card>

  <popup :visible="visible" @close="visible = false">
    <form-builder 
      :schema="planning_schema" 
      :model="planning" 
      :options="options"
     >
      <el-form-item slot="suffix">
        <el-button type="primary" @click="approve()">
          审核
        </el-button>
      </el-form-item>
    </form-builder>
  </popup>

  <el-dialog
    title="请选择审核状态"
    :visible.sync="dialogVisible"
    width="30%"
    >
    <el-select v-model="approve_status">
      <el-option label="通过" value="通过"></el-option>
      <el-option label="拒绝" value="拒绝"></el-option>
    </el-select>
    <span slot="footer" >
      <el-button @click="dialogVisible = false">取 消</el-button>
      <el-button type="primary" @click="approve()">确 定</el-button>
    </span>
  </el-dialog>
</div>